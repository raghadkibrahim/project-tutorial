# Data Preprocessing {.unnumbered}

```{python}

#| echo: true
#| eval: false
#| fig-cap: "Basic row counts by year"
import pandas as pd
from pathlib import Path

p = Path('data/raw/verdicts.csv')
df = pd.read_csv(p)
df['judgment_date'] = pd.to_datetime(df['judgment_date'], errors='coerce')
df['year'] = df['judgment_date'].dt.year
counts = df.groupby('year').size().rename('n').reset_index()
counts

```



``` python

from sentence_transformers import SentenceTransformer

model = SentenceTransformer('sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2')

embs = model.encode(df['cleaned_recitals'].astype(str).tolist(), batch_size=256, show_progress_bar=True)

# Save to disk for FAISS/ScaNN

```

